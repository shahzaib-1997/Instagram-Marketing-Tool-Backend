{% extends "userapi/base.html" %}

{% block title %}Change Password{% endblock %}

{% block header %}
    {% include "userapi/header.html" %}
{% endblock %}

{% block style %}
<style>
    .password-input-wrapper {
        position: relative;
        margin-bottom: 15px;
    }

    #eye_icon_new_password {
        position: absolute;
        top: 26%;
        right: 60px;
        transform: translateY(-50%);
        cursor: pointer;
    }

    #eye_icon_confirm_password {
        position: absolute;
        top: 49%;
        right: 60px;
        transform: translateY(-50%);
        cursor: pointer;
    }
</style>
{% endblock %}

{% block content %}
    <div class="form">
        <form method="POST" action="{% url 'userapi:password-change' %}" onsubmit="return validatePasswords()">
            {% csrf_token %}
            <div class="password-input-wrapper">
                <input type="password" placeholder="New Password" name="new_password" id="new_password" class="password-field" required>
                <i class="fas fa-eye" id="eye_icon_new_password" onclick="togglePassword('new_password')"></i>
                <input type="password" placeholder="Confirm Password" name="confirm_password" id="confirm_password" class="password-field" required>
                <i class="fas fa-eye" id="eye_icon_confirm_password" onclick="togglePassword('confirm_password')"></i>
            </div>
            <button type="submit">Submit</button>
        </form>
    </div>

    <script>
        function togglePassword(inputId) {
            var passwordInput = document.getElementById(inputId);
            passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
            const eyeIcon = document.getElementById(`eye_icon_${inputId}`);
            eyeIcon.className = `fas fa-eye${passwordInput.type === "password" ? "" : "-slash"}`;
        }

        function validatePasswords() {
            var newPassword = document.getElementById('new_password').value;
            var confirmPassword = document.getElementById('confirm_password').value;

            if (newPassword !== confirmPassword) {
                alert('New password and confirm password must match.');
                return false;
            }

            return true;
        }
    </script>
{% endblock %}
